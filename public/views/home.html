<div class="row col-md-10 col-md-offset-1">
    <h1 class="page-header">Herzlich Willkommen bei AnFeSys</h1>
</div>

<div class="row col-md-10 col-md-offset-1">
    <p><button class="btn btn-primary" ng-click="go('/newSurvey')" >Neue Umfrage erstellen</button></p>
</div>
<!-- sortedSurveys got 3 entries ( one for each status ) -->
<div class="row col-md-10 col-md-offset-1" ng-repeat="s in sortedSurveys">
    <div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading"><b>{{s[0]}} </b><span class="badge pull-right">{{s[1].length}}</span></div>

    <!--Table -->

    <p style="margin:15px" ng-hide="s[1].length != 0">Keine Umfragen vorhanden</p>

    <table class="table table-hover" ng-show="s[1].length != 0">
        <thead style="cursor:default">
            <tr>
                <th>Von</th>
                <th>Bis</th>
                <th>Titel</th>
                <th>Teilnahme</th>
            </tr>
        </thead>
        <!-- for each survey in the sortedSurveys[x] - Array one tbody element -->
        <tbody style="cursor:pointer" ng-repeat="survey in s[1] track by $index">

                <tr ng-click="toggleCollapse(survey)">
                    <td>Startdatum</td>
                    <td>Enddatum</td>
                    <td>{{survey.data.title}}</td>
                    <td>
                        <progressbar max="max" value="dynamic"><span style="color:white; white-space:nowrap;">{{dynamic}} / {{max}}</span></progressbar>
                    </td>
                </tr>
                <tr collapse="survey.isCollapsed">
                    <td colspan="4" style="border:0px">
                        <!-- Depending on status there are different buttons -->
                        <span ng-switch on="s[0]">
                              <span ng-switch-when="Entwurf">
                                    <button class="btn btn-default" ng-Click="edit($index)">Bearbeiten</button>
                                    <button class="btn btn-info" ng-Click="activate($index)">Freischalten</button>
                                    <button class="btn btn-danger" ng-Click="delete(0, $index)">L&ouml;schen</button>
                              </span>
                              <span ng-switch-when="Laufende Umfragen">
                                    <button class="btn btn-default" ng-Click="close($index)">Beenden</button>
                                    <button class="btn btn-danger" ng-Click="delete(1, $index)">L&ouml;schen</button>
                              </span>
                                <span ng-switch-when="Beendete Umfragen">
                                    <button class="btn btn-default" ng-Click="viewResults($index)">Auswertung</button>
                                    <button class="btn btn-success" ng-Click="restart($index)">Wiederverwenden</button>
                                    <button class="btn btn-danger" ng-Click="delete(2, $index)">L&ouml;schen</button>
                              </span>
                        </span>

                    </td>
                </tr>
        </tbody>
    </table>
</div>

</div>





<!--
<div class="row col-md-10 col-md-offset-1">
    <button class="btn btn-warning">Abbrechen</button>
    <button class="btn btn-default">Beenden</button>
</div>

-->
