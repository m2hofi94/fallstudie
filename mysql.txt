use afs;
drop table if exists users;
drop table if exists surveys;
drop table if exists questions;
drop table if exists tokens;

create table users (
  id int not null auto_increment primary key,
  email varchar(100) not null unique,
  title varchar(100),
  firstName varchar(100),
  lastName varchar(100),
  password varchar(100) not null,
  created timestamp default now()
);

create table surveys (
  id int not null auto_increment primary key,
  userID int not null,
  status varchar(100) not null,
  title varchar(100),
  endDate datetime,
  created timestamp default now()
);

create table questions(
  id int not null auto_increment primary key,
  surveyID int not null,
  title varchar(200),
  type varchar(100),
  created timestamp default now()
);

create table tokens (
  id int not null auto_increment primary key,
  surveyID int not null,
  token varchar(100) not null
);

create table recipients (
  email varchar(100) not null,
  surveyID int not null,
  PRIMARY KEY (email, surveyID)
);

create table answers(
  id int not null auto_increment primary key,
  surveyID int not null,
  value varchar(1000) not null
);